based on https://github.com/jamiebuilds/the-super-tiny-compiler
